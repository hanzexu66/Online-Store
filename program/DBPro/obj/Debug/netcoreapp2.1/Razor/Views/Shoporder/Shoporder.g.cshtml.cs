#pragma checksum "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "e33fbbc23bc584d72a10e21d7a120f12282f9364"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shoporder_Shoporder), @"mvc.1.0.view", @"/Views/Shoporder/Shoporder.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Shoporder/Shoporder.cshtml", typeof(AspNetCore.Views_Shoporder_Shoporder))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\_ViewImports.cshtml"
using DBPro;

#line default
#line hidden
#line 2 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\_ViewImports.cshtml"
using DBPro.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"e33fbbc23bc584d72a10e21d7a120f12282f9364", @"/Views/Shoporder/Shoporder.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"22a40c1456db73c9a8353b2e70a1daa81653e306", @"/Views/_ViewImports.cshtml")]
    public class Views_Shoporder_Shoporder : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<OrderViewModel>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 1 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
  
    ViewData["Title"] = "Order";

#line default
#line hidden
            BeginContext(70, 433, true);
            WriteLiteral(@"

<div class=""ui  grid container"">

    <div class=""two wide column"">
        <div class=""ui massive vertical menu"">
            <div class=""item"">
                <div class=""header"">店铺订单</div>
                <div class=""menu"">
                    <a class=""active item"" id=""All"" onclick=""ChangeOrderView(this.id)"">全部订单</a>
                    <a class=""item"" id=""WaitDeliver"" onclick=""ChangeOrderView(this.id)"">待发货</a>
");
            EndContext();
            BeginContext(697, 189, true);
            WriteLiteral("                    <a class=\"item\" id=\"WaitComment\" onclick=\"ChangeOrderView(this.id)\">待评价</a>\r\n                    <a class=\"item\" id=\"Finish\" onclick=\"ChangeOrderView(this.id)\">已完成</a>\r\n");
            EndContext();
            BeginContext(1080, 187, true);
            WriteLiteral("                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"twelve wide column\">\r\n        <div class=\"ui black segment\" id=\"OrderList\" style=\"display:block\">\r\n");
            EndContext();
            BeginContext(1295, 210, true);
            WriteLiteral("            <div class=\"ui red center aligned segment\" id=\"Empty\" style=\"display:block\">\r\n                <br />\r\n                <br /><br />\r\n                <p>您的店铺还没有订单</p>\r\n                <br /><br />\r\n\r\n");
            EndContext();
            BeginContext(1571, 20, true);
            WriteLiteral("            </div>\r\n");
            EndContext();
#line 38 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
               

                for (int i=0;i<Model.Count();++i)
                {

#line default
#line hidden
            BeginContext(1708, 39, true);
            WriteLiteral("            <div class=\"ui red segment\"");
            EndContext();
            BeginWriteAttribute("id", " id=", 1747, "", 1782, 1);
#line 42 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 1751, string.Format("Order{0:D3}",i), 1751, 31, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1782, 25, true);
            WriteLiteral(" style=\"display:block\">\r\n");
            EndContext();
            BeginContext(1834, 225, true);
            WriteLiteral("                <div class=\"ui grid\">\r\n                    <div class=\"row\">\r\n                        <a class=\"ui red image label\">\r\n                            <i class=\"clipboard outline icon\"></i>订单状态 <div class=\"detail\">");
            EndContext();
            BeginContext(2060, 57, false);
#line 47 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                                                      Write(DBPro.Entity.Order.OrderStateConvert[Model[i].orderState]);

#line default
#line hidden
            EndContext();
            BeginContext(2117, 90, true);
            WriteLiteral("</div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n");
            EndContext();
#line 52 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                 foreach (var shop in Model[i].DSItem)
                {

#line default
#line hidden
            BeginContext(2314, 77, true);
            WriteLiteral("                    <div class=\"ui grid\" style=\"background-color:#f7f7f7;\">\r\n");
            EndContext();
            BeginContext(2431, 166, true);
            WriteLiteral("                        <div class=\"row\">\r\n                            <div class=\"fourteen wide  column\">\r\n                                <a style=\"color:#000000;\">");
            EndContext();
            BeginContext(2598, 22, false);
#line 58 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                     Write(shop.Value[0].shopName);

#line default
#line hidden
            EndContext();
            BeginContext(2620, 151, true);
            WriteLiteral("</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"ui hiden grid\">\r\n");
            EndContext();
#line 65 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                         for(int k=0;k<shop.Value.Count;++k)
                        {

#line default
#line hidden
            BeginContext(2944, 44, true);
            WriteLiteral("                            <div class=\"row\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 2988, "\"", 3032, 1);
#line 67 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 2993, string.Format("goods{0:D3}{1:D3}",i,k), 2993, 39, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3033, 3, true);
            WriteLiteral(">\r\n");
            EndContext();
            BeginContext(3085, 126, true);
            WriteLiteral("                            <div class=\"four wide hidden column\">\r\n                                <img class=\"ui small image\"");
            EndContext();
            BeginWriteAttribute("src", " src=\"", 3211, "\"", 3241, 1);
#line 70 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 3217, shop.Value[k].imagePath, 3217, 24, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3242, 137, true);
            WriteLiteral(">\r\n                            </div>\r\n                            <div class=\"six wide hidden column\">\r\n                                ");
            EndContext();
            BeginContext(3380, 22, false);
#line 73 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                           Write(shop.Value[k].itemName);

#line default
#line hidden
            EndContext();
            BeginContext(3402, 138, true);
            WriteLiteral("\r\n                            </div>\r\n                            <div class=\"three wide hidden column\">\r\n                                ");
            EndContext();
            BeginContext(3541, 23, false);
#line 76 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                           Write(shop.Value[k].itemPrice);

#line default
#line hidden
            EndContext();
            BeginContext(3564, 136, true);
            WriteLiteral("\r\n                            </div>\r\n                            <div class=\"one wide hidden column\">\r\n                                ");
            EndContext();
            BeginContext(3701, 24, false);
#line 79 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                           Write(shop.Value[k].itemAmount);

#line default
#line hidden
            EndContext();
            BeginContext(3725, 262, true);
            WriteLiteral(@"
                            </div>
                            <div class=""two wide hidden column"">
                                <a class=""small ui button"" name=""evaluate"" hidden>评价</a>
                            </div>
                        </div>
");
            EndContext();
#line 85 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"

                        }

#line default
#line hidden
            BeginContext(4016, 54, true);
            WriteLiteral("                        \r\n                    </div>\r\n");
            EndContext();
#line 89 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                }

#line default
#line hidden
            BeginContext(4089, 120, true);
            WriteLiteral("\r\n                <div class=\"ui hiden grid\">\r\n                    <div class=\"row\" style=\"background-color:#f7f7f7;\">\r\n");
            EndContext();
            BeginContext(4244, 265, true);
            WriteLiteral(@"                        <div class=""eleven wide hidden column"">
                        </div>
                        <div class=""five wide hidden column"">
                            <a tabindex=""0"" class=""ui animated  button"" name=""Look"" onclick=""viewOrder()""");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4509, "\"", 4531, 1);
#line 97 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 4514, Model[i].orderID, 4514, 17, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4532, 397, true);
            WriteLiteral(@">
                                <div class=""visible content"">查看订单</div>
                                <div class=""hidden content"">
                                    <i class=""eye icon""></i>
                                </div>
                            </a>
                            <div tabindex=""0"" class=""ui animated fade button"" name=""Delete"" onclick=""DeleteEnsure(this.id)""");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4929, "\"", 4960, 1);
#line 103 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 4934, string.Format("{0:D3}",i), 4934, 26, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4961, 46, true);
            WriteLiteral(">\r\n                                <div hidden");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 5007, "\"", 5050, 1);
#line 104 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 5012, string.Format("ModelOrderID{0:D3}",i), 5012, 38, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(5051, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(5053, 16, false);
#line 104 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                                                   Write(Model[i].orderID);

#line default
#line hidden
            EndContext();
            BeginContext(5069, 51, true);
            WriteLiteral("</div>\r\n                                <div hidden");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 5120, "\"", 5162, 1);
#line 105 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 5125, string.Format("ModelShopID{0:D3}",i), 5125, 37, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(5163, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(5165, 25, false);
#line 105 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                                                  Write(Model[i].LSItem[0].shopID);

#line default
#line hidden
            EndContext();
            BeginContext(5190, 385, true);
            WriteLiteral(@"</div>
                                <div class=""visible content"">发货</div>
                                <div class=""hidden content"">
                                    <i class=""check icon""></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
");
            EndContext();
#line 115 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                }
            

#line default
#line hidden
            BeginContext(5609, 1984, true);
            WriteLiteral(@"        </div>
    </div>
</div>

<div class=""ui basic modal"">
    <div class=""ui icon header"">
        <i class=""check icon""></i>
        您确定此订单已发货吗？
    </div>

    <div class=""actions"">
        <div class=""ui red basic cancel inverted button"">
            <i class=""remove icon"" id=""CancelDelete""></i>
            取消
        </div>
        <div class=""ui green ok inverted button"" onclick=""DeleteOrder()"">
            <i class=""checkmark icon""></i>
            确定
        </div>
    </div>
</div>

<script>
    function CheckNotEmpty() {
        var re = /\s/;
        var Childs = document.getElementById(""OrderList"").childNodes;
        for (var i = 0; i < Childs.length; i++) {
            var node = Childs[i];
            // nodetype 和 re的正则匹配
            if (node.nodeType == 3 && re.test(node.nodeValue)) {
                node.parentNode.removeChild(node);
            }
        }//去除空文本节点
        var displaynum = 0;
        for (var i = 1; i < Childs.length; i++) {
          ");
            WriteLiteral(@"  var node = Childs[i];
            if (node.style.display == ""block"") {
                displaynum++;
            }
        }
        console.log(Childs.length);
        console.log(displaynum);
        if (displaynum == 0) {
            return 0;
        }
        else {
            return 1;
        }
    }
    function OrderEmpty() {
        if (CheckNotEmpty()) {
            document.getElementById(""Empty"").style.display = ""none"";
        }
        else {
            document.getElementById(""Empty"").style.display = ""block"";
        }
    }
    function DeleteOrder() {
        //console.log(deleteid);
        //var deleteorder = document.getElementById(deleteid);
        //deleteorder.parentNode.removeChild(deleteorder);
        //OrderEmpty();

        $.ajax({
            type: ""post"",
            url: ""/Order/changeOrderState"",
            data: {
                o_id: deleteOrder_id,
                state:");
            EndContext();
            BeginContext(7595, 47, false);
#line 185 "C:\Users\hanzexu66\Desktop\第8组_1754017_韩泽旭_网购系统\program\DBPro\Views\Shoporder\Shoporder.cshtml"
                  Write((int)DBPro.Entity.Order.OrderStatus.unevaluated);

#line default
#line hidden
            EndContext();
            BeginContext(7643, 5784, true);
            WriteLiteral(@"
            },
            success: function (result) {
                alert(""发货成功！"");
                if (result == ""修改成功"") {
                    
                    standardPost(""/Shoporder/Shoporder"", currentShopid, ""s_id"");
                }
            }
        });
    }
    function ChangeOrderView(id) {
        var StateList = document.querySelectorAll("".detail"");
        var i = 0;
        if (id == ""WaitPay"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待付款"") {

                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""All"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
             ");
            WriteLiteral(@"   OrderX.style.display = ""block"";
            }
        }
        else if (id == ""WaitDeliver"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待发货"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""WaitReceive"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待收货"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""WaitComment"") {
            for (i = 0; i < StateList.length; i++) {
   ");
            WriteLiteral(@"             var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待评价"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""Finish"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""已完成"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""WaitRefund"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待退款"") {
                    Order");
            WriteLiteral(@"X.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""Refunded"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""已退款"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        OrderEmpty();
    }
    function Inti() {
        var OrderList = document.querySelectorAll("".ui.red.segment"");
        var Button1 = document.getElementsByName(""evaluate"");
        var Button2 = document.getElementsByName(""Delete"");
        for (var i = 0; i < Button1.length; i++) {
            var Order1 = Button1[i].parentNode.parentNode.parentNode.parentNode;
            var State = Order1.children[0].ch");
            WriteLiteral(@"ildren[0].children[0].children[1];
            //console.log(Order1);
            //console.log(State.innerText);


            //*7.12 8:00
            //
            //
            Button1[i].style.display = ""none"";
            //if (State.innerText == ""待评价"") {
            //    Button1[i].style.display = ""true"";
            //}
            //else {
            //    Button1[i].style.display = ""none"";
            //}
        }
        for (var i = 0; i < Button2.length; i++) {
            var Order1 = Button1[i].parentNode.parentNode.parentNode.parentNode;
            var State = Order1.children[0].children[0].children[0].children[1];
            //console.log(Order1);
            //console.log(State.innerText);
            if (State.innerText !=  ""待发货"") {
                Button2[i].style.display = ""none"";
            }
            else {
                Button2[i].style.display = ""true"";
            }
        }
    }
    OrderEmpty();
    Inti();
</script>
<script>
    func");
            WriteLiteral(@"tion viewOrder() {

        // alert(event.currentTarget.id);
        var o_id = event.currentTarget.id;
        standardPost(""/Shoporder/Detail"", o_id, ""o_id"");
    }
</script>
<script>
    var deleteid;//当前被选中删除的订单的id
    var deleteOrder_id;
    var currentShopid;
    function DeleteEnsure(id) {

        currentShopid = document.getElementById(""ModelShopID"" + id).innerHTML;
        deleteOrder_id = document.getElementById(""ModelOrderID"" + id).innerHTML;
        //console.log(id);
        deleteid = ""Order"" + id;
        //console.log(deleteid);
        $('.ui.basic.modal')
            .modal('show')
            ;

    }
</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<OrderViewModel>> Html { get; private set; }
    }
}
#pragma warning restore 1591
