#pragma checksum "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "b1681e58ce21a3f9882706d59733fe1837193f22"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Pay_Pay), @"mvc.1.0.view", @"/Views/Pay/Pay.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Pay/Pay.cshtml", typeof(AspNetCore.Views_Pay_Pay))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "E:\2--practice\vs\c#\DBPro\DBPro\Views\_ViewImports.cshtml"
using DBPro;

#line default
#line hidden
#line 2 "E:\2--practice\vs\c#\DBPro\DBPro\Views\_ViewImports.cshtml"
using DBPro.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"b1681e58ce21a3f9882706d59733fe1837193f22", @"/Views/Pay/Pay.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"22a40c1456db73c9a8353b2e70a1daa81653e306", @"/Views/_ViewImports.cshtml")]
    public class Views_Pay_Pay : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<PayViewModel>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 1 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
  
    ViewData["Title"] = "Pay";

#line default
#line hidden
            BeginContext(60, 224, true);
            WriteLiteral("<center>\r\n    <div class=\"ui selection dropdown\" width=\"500\">\r\n        <input type=\"hidden\" name=\"gender\">\r\n        <i class=\"dropdown icon\"></i>\r\n        <div class=\"default text\">请选择收货地址</div>\r\n        <div class=\"menu\">\r\n");
            EndContext();
#line 11 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
               
                for(int i=0;i<Model.LReceive.Count;++i)
                {

#line default
#line hidden
            BeginContext(377, 29, true);
            WriteLiteral("            <div class=\"item\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 406, "\"", 439, 1);
#line 14 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
WriteAttributeValue("", 411, Model.LReceive[i].ReceiveID, 411, 28, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(440, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(442, 26, false);
#line 14 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                           Write(Model.LReceive[i].province);

#line default
#line hidden
            EndContext();
            BeginContext(468, 1, true);
            WriteLiteral(" ");
            EndContext();
            BeginContext(470, 22, false);
#line 14 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                                                       Write(Model.LReceive[i].city);

#line default
#line hidden
            EndContext();
            BeginContext(492, 1, true);
            WriteLiteral(" ");
            EndContext();
            BeginContext(494, 26, false);
#line 14 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                                                                               Write(Model.LReceive[i].district);

#line default
#line hidden
            EndContext();
            BeginContext(520, 1, true);
            WriteLiteral(" ");
            EndContext();
            BeginContext(522, 24, false);
#line 14 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                                                                                                           Write(Model.LReceive[i].street);

#line default
#line hidden
            EndContext();
            BeginContext(546, 1, true);
            WriteLiteral(" ");
            EndContext();
            BeginContext(548, 30, false);
#line 14 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                                                                                                                                     Write(Model.LReceive[i].detailAdress);

#line default
#line hidden
            EndContext();
            BeginContext(578, 8, true);
            WriteLiteral("</div>\r\n");
            EndContext();
#line 15 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                }
            

#line default
#line hidden
            BeginContext(620, 527, true);
            WriteLiteral(@"        </div>
    </div>
</center>
<br />
<br />
<br />
<div class=""ui centered container"" align=""center"" style=""width:80%;"">
    <div class=""ui horizontal divider"">
        确认订单信息
    </div>
</div>

<div class=""ui centered container"" align=""center"" style=""width:65%;"">
    <table class=""ui table"" width=""600"" align=center>
        <thead>
            <tr>
                <th>商品</th>
                <th>数量</th>
                <th>单价</th>
                <th>总价</th>
            </tr>
        </thead>
");
            EndContext();
#line 39 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
           
            double totalPrice = 0;
            for(int i=0;i<Model.LItem.Count();++i)
            {
                totalPrice += Model.Lamount[i] * Model.LItem[i].itemPrice;

#line default
#line hidden
            BeginContext(1339, 14, true);
            WriteLiteral("        <tbody");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 1353, "\"", 1380, 1);
#line 44 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
WriteAttributeValue("", 1358, Model.LItem[i].itemID, 1358, 22, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1381, 121, true);
            WriteLiteral(">\r\n            <tr>\r\n                <td>\r\n                    <h4 class=\"ui image header\">\r\n                        <img");
            EndContext();
            BeginWriteAttribute("src", " src=", 1502, "", 1532, 1);
#line 48 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
WriteAttributeValue("", 1507, Model.LItem[i].imagePath, 1507, 25, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1532, 31, true);
            WriteLiteral(" class=\"ui mini rounded image\">");
            EndContext();
            BeginContext(1564, 23, false);
#line 48 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                                                    Write(Model.LItem[i].itemName);

#line default
#line hidden
            EndContext();
            BeginContext(1587, 85, true);
            WriteLiteral("\r\n                    </h4>\r\n                </td>\r\n                <td name=\"amount\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 1672, "\"", 1694, 1);
#line 51 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
WriteAttributeValue("", 1677, Model.Lamount[i], 1677, 17, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1695, 23, true);
            WriteLiteral(">\r\n                    ");
            EndContext();
            BeginContext(1719, 16, false);
#line 52 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
               Write(Model.Lamount[i]);

#line default
#line hidden
            EndContext();
            BeginContext(1735, 67, true);
            WriteLiteral("\r\n                </td>\r\n                <td>\r\n                    ");
            EndContext();
            BeginContext(1803, 24, false);
#line 55 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
               Write(Model.LItem[i].itemPrice);

#line default
#line hidden
            EndContext();
            BeginContext(1827, 67, true);
            WriteLiteral("\r\n                </td>\r\n                <td>\r\n                    ");
            EndContext();
            BeginContext(1895, 64, false);
#line 58 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
               Write(string.Format("{0}", Model.Lamount[i]* Model.LItem[i].itemPrice));

#line default
#line hidden
            EndContext();
            BeginContext(1959, 64, true);
            WriteLiteral("\r\n                </td>\r\n            </tr>\r\n\r\n        </tbody>\r\n");
            EndContext();
#line 63 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
            }

        

#line default
#line hidden
            BeginContext(2051, 1376, true);
            WriteLiteral(@"        
    </table>
</div>

<div class=""ui basic modal"" id=""payok"">
    <div class=""ui icon header"">
        <i class=""shop icon""></i><font style=""vertical-align: inherit;"">
            <font style=""vertical-align: inherit;"">
                付款
            </font>
        </font>
    </div>
    <div class=""content"" align=""center"">
        <p><font style=""vertical-align: inherit;""><font style=""vertical-align: inherit;"">你确定要购买这些商品吗？</font></font></p>
    </div>
    <div class=""actions"">
        <div class=""ui red basic cancel inverted button"">
            <i class=""remove icon""></i>
            再想想
        </div>
        <div class=""ui green ok inverted button"" onclick=""payinterface()"">
            <i class=""checkmark icon""></i>
            是的，就是这些
        </div>
    </div>
</div>

<div class=""ui basic modal"" id=""payComplete"">
    <div class=""ui icon header"">
        <i class=""check icon""></i><font style=""vertical-align: inherit;"">
            <font style=""vertical-align: inherit");
            WriteLiteral(@";"">
                支付成功
            </font>
        </font>
    </div>
    <div class=""actions"">
        <a class=""ui green ok inverted button"" onclick=""complete()"">
            <i class=""checkmark icon""></i>
            好的
        </a>
    </div>
</div>

<div align=""center"" style=""position:relative;top:10px"">
    <div class=""ui label""");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 3427, "\"", 3443, 1);
#line 110 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
WriteAttributeValue("", 3432, totalPrice, 3432, 11, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3444, 23, true);
            WriteLiteral(" name=\"totalPrice\"> 合计：");
            EndContext();
            BeginContext(3468, 10, false);
#line 110 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                                                            Write(totalPrice);

#line default
#line hidden
            EndContext();
            BeginContext(3478, 835, true);
            WriteLiteral(@" </div>
</div>
<p></p>
<div align=""center"" style=""position:relative;top:10px"">
    <button class=""ui primary button"" onclick=""myFunction()"">付款</button>
</div>

<script>
    //获取收货地址
    var JSreceiveID;
    $('.item').on(""click"", function () {
        JSreceiveID = this.id;
    })
</script>
<script>

    //点击付款后地响应
    function myFunction() {
        $('#payok').modal('show'); 
    }

    ////确认付款后的操作
    //function payinterface() {
    //    $('#2').modal('show'); 

    //}

    //确认付款后的操作
    var o_id;
    function payinterface() {
        var itemIDs = new Array();
        var amounts = new Array();
        var JStotal = document.getElementsByName(""totalPrice"")[0].id;
        //alert(JStotal);
        var amountElements = document.getElementsByName(""amount"");
        for (var i = 0; i <");
            EndContext();
            BeginContext(4314, 19, false);
#line 145 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Pay\Pay.cshtml"
                      Write(Model.LItem.Count());

#line default
#line hidden
            EndContext();
            BeginContext(4333, 978, true);
            WriteLiteral(@"; i++)
        {
            itemIDs.push(amountElements[i].parentNode.parentNode.id);
            amounts.push(amountElements[i].id);
        }
        $.ajax({
            type: ""post"",
            url: ""/Pay/payment"",
            data: {
                i_ids: itemIDs,
                amounts: amounts,
                receiveID: JSreceiveID,
                total: JStotal
            },
            success: function (result) {
                
                //根据result做指定操作
                if (result[0] == ""创建成功"") {
                    //o_id = result[1];
                    showSucceed();
                }
                else {
                    alert(result[0]);
                }
            }
        });
    }
    function showSucceed() {
        $('#payComplete').modal('show'); 
    }
    function complete() {
        //alert(""跳转"")
        //这里跳转
        standardPost(""/Order/Order"", o_id, ""o_id"");

    }

</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<PayViewModel> Html { get; private set; }
    }
}
#pragma warning restore 1591
