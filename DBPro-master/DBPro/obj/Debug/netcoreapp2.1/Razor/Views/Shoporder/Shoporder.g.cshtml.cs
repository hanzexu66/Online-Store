#pragma checksum "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "532b16b795899eb33af93fb45b6b88392179e628"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shoporder_Shoporder), @"mvc.1.0.view", @"/Views/Shoporder/Shoporder.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Shoporder/Shoporder.cshtml", typeof(AspNetCore.Views_Shoporder_Shoporder))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "E:\2--practice\vs\c#\DBPro\DBPro\Views\_ViewImports.cshtml"
using DBPro;

#line default
#line hidden
#line 2 "E:\2--practice\vs\c#\DBPro\DBPro\Views\_ViewImports.cshtml"
using DBPro.Models;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"532b16b795899eb33af93fb45b6b88392179e628", @"/Views/Shoporder/Shoporder.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"22a40c1456db73c9a8353b2e70a1daa81653e306", @"/Views/_ViewImports.cshtml")]
    public class Views_Shoporder_Shoporder : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<OrderViewModel>>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#line 1 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
  
    ViewData["Title"] = "Order";

#line default
#line hidden
            BeginContext(70, 1189, true);
            WriteLiteral(@"

<div class=""ui  grid container"">

    <div class=""two wide column"">
        <div class=""ui massive vertical menu"">
            <div class=""item"">
                <div class=""header"">店铺订单</div>
                <div class=""menu"">
                    <a class=""active item"" id=""All"" onclick=""ChangeOrderView(this.id)"">全部订单</a>
                    <a class=""item"" id=""WaitDeliver"" onclick=""ChangeOrderView(this.id)"">待发货</a>
                    <a class=""item"" id=""WaitReceive"" onclick=""ChangeOrderView(this.id)"">待收货</a>
                    <a class=""item"" id=""WaitPay"" onclick=""ChangeOrderView(this.id)"">待付款</a>
                    <a class=""item"" id=""WaitComment"" onclick=""ChangeOrderView(this.id)"">待评价</a>
                    <a class=""item"" id=""Finish"" onclick=""ChangeOrderView(this.id)"">已完成</a>
                    <a class=""item"" id=""WaitRefund"" onclick=""ChangeOrderView(this.id)"">待退款</a>
                    <a class=""item"" id=""Refunded"" onclick=""ChangeOrderView(this.id)"">已退款</a>
                </div>");
            WriteLiteral("\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"twelve wide column\">\r\n        <div class=\"ui black segment\" id=\"OrderList\" style=\"display:block\">\r\n");
            EndContext();
            BeginContext(1287, 215, true);
            WriteLiteral("            <div class=\"ui red center aligned segment\" id=\"Empty\" style=\"display:block\">\r\n                <p>您现在还没有订单，快去买买买吧！</p>\r\n\r\n                <img class=\"ui centered large image\" src=\"\">\r\n            </div>\r\n");
            EndContext();
#line 35 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
               

                for (int i=0;i<Model.Count();++i)
                {

#line default
#line hidden
            BeginContext(1619, 39, true);
            WriteLiteral("            <div class=\"ui red segment\"");
            EndContext();
            BeginWriteAttribute("id", " id=", 1658, "", 1693, 1);
#line 39 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 1662, string.Format("Order{0:D3}",i), 1662, 31, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1693, 25, true);
            WriteLiteral(" style=\"display:block\">\r\n");
            EndContext();
            BeginContext(1745, 225, true);
            WriteLiteral("                <div class=\"ui grid\">\r\n                    <div class=\"row\">\r\n                        <a class=\"ui red image label\">\r\n                            <i class=\"clipboard outline icon\"></i>订单状态 <div class=\"detail\">");
            EndContext();
            BeginContext(1971, 57, false);
#line 44 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                                                      Write(DBPro.Entity.Order.OrderStateConvert[Model[i].orderState]);

#line default
#line hidden
            EndContext();
            BeginContext(2028, 90, true);
            WriteLiteral("</div>\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n");
            EndContext();
#line 49 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                 foreach (var shop in Model[i].DSItem)
                {

#line default
#line hidden
            BeginContext(2225, 77, true);
            WriteLiteral("                    <div class=\"ui grid\" style=\"background-color:#f7f7f7;\">\r\n");
            EndContext();
            BeginContext(2342, 166, true);
            WriteLiteral("                        <div class=\"row\">\r\n                            <div class=\"fourteen wide  column\">\r\n                                <a style=\"color:#000000;\">");
            EndContext();
            BeginContext(2509, 22, false);
#line 55 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                     Write(shop.Value[0].shopName);

#line default
#line hidden
            EndContext();
            BeginContext(2531, 151, true);
            WriteLiteral("</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"ui hiden grid\">\r\n");
            EndContext();
#line 62 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                         for(int k=0;k<shop.Value.Count;++k)
                        {

#line default
#line hidden
            BeginContext(2855, 44, true);
            WriteLiteral("                            <div class=\"row\"");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 2899, "\"", 2943, 1);
#line 64 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 2904, string.Format("goods{0:D3}{1:D3}",i,k), 2904, 39, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(2944, 3, true);
            WriteLiteral(">\r\n");
            EndContext();
            BeginContext(2996, 126, true);
            WriteLiteral("                            <div class=\"four wide hidden column\">\r\n                                <img class=\"ui small image\"");
            EndContext();
            BeginWriteAttribute("src", " src=\"", 3122, "\"", 3152, 1);
#line 67 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 3128, shop.Value[k].imagePath, 3128, 24, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3153, 137, true);
            WriteLiteral(">\r\n                            </div>\r\n                            <div class=\"six wide hidden column\">\r\n                                ");
            EndContext();
            BeginContext(3291, 22, false);
#line 70 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                           Write(shop.Value[k].itemName);

#line default
#line hidden
            EndContext();
            BeginContext(3313, 138, true);
            WriteLiteral("\r\n                            </div>\r\n                            <div class=\"three wide hidden column\">\r\n                                ");
            EndContext();
            BeginContext(3452, 23, false);
#line 73 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                           Write(shop.Value[k].itemPrice);

#line default
#line hidden
            EndContext();
            BeginContext(3475, 136, true);
            WriteLiteral("\r\n                            </div>\r\n                            <div class=\"one wide hidden column\">\r\n                                ");
            EndContext();
            BeginContext(3612, 24, false);
#line 76 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                           Write(shop.Value[k].itemAmount);

#line default
#line hidden
            EndContext();
            BeginContext(3636, 262, true);
            WriteLiteral(@"
                            </div>
                            <div class=""two wide hidden column"">
                                <a class=""small ui button"" name=""evaluate"" hidden>评价</a>
                            </div>
                        </div>
");
            EndContext();
#line 82 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"

                        }

#line default
#line hidden
            BeginContext(3927, 54, true);
            WriteLiteral("                        \r\n                    </div>\r\n");
            EndContext();
#line 86 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                }

#line default
#line hidden
            BeginContext(4000, 120, true);
            WriteLiteral("\r\n                <div class=\"ui hiden grid\">\r\n                    <div class=\"row\" style=\"background-color:#f7f7f7;\">\r\n");
            EndContext();
            BeginContext(4155, 265, true);
            WriteLiteral(@"                        <div class=""eleven wide hidden column"">
                        </div>
                        <div class=""five wide hidden column"">
                            <a tabindex=""0"" class=""ui animated  button"" name=""Look"" onclick=""viewOrder()""");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4420, "\"", 4442, 1);
#line 94 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 4425, Model[i].orderID, 4425, 17, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4443, 397, true);
            WriteLiteral(@">
                                <div class=""visible content"">查看订单</div>
                                <div class=""hidden content"">
                                    <i class=""eye icon""></i>
                                </div>
                            </a>
                            <div tabindex=""0"" class=""ui animated fade button"" name=""Delete"" onclick=""DeleteEnsure(this.id)""");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4840, "\"", 4871, 1);
#line 100 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 4845, string.Format("{0:D3}",i), 4845, 26, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4872, 46, true);
            WriteLiteral(">\r\n                                <div hidden");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 4918, "\"", 4961, 1);
#line 101 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 4923, string.Format("ModelOrderID{0:D3}",i), 4923, 38, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(4962, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(4964, 16, false);
#line 101 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                                                   Write(Model[i].orderID);

#line default
#line hidden
            EndContext();
            BeginContext(4980, 51, true);
            WriteLiteral("</div>\r\n                                <div hidden");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 5031, "\"", 5073, 1);
#line 102 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
WriteAttributeValue("", 5036, string.Format("ModelShopID{0:D3}",i), 5036, 37, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(5074, 1, true);
            WriteLiteral(">");
            EndContext();
            BeginContext(5076, 25, false);
#line 102 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                                                                                  Write(Model[i].LSItem[0].shopID);

#line default
#line hidden
            EndContext();
            BeginContext(5101, 395, true);
            WriteLiteral(@"</div>
                                <div class=""visible content"">发货</div>
                                <div class=""hidden content"">
                                    <i class=""trash alternate icon""></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
");
            EndContext();
#line 112 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                }
            

#line default
#line hidden
            BeginContext(5530, 2002, true);
            WriteLiteral(@"        </div>
    </div>
</div>

<div class=""ui basic modal"">
    <div class=""ui icon header"">
        <i class=""trash alternate outline icon""></i>
        您确定此订单已发货吗？
    </div>

    <div class=""actions"">
        <div class=""ui red basic cancel inverted button"">
            <i class=""remove icon"" id=""CancelDelete""></i>
            取消
        </div>
        <div class=""ui green ok inverted button"" onclick=""DeleteOrder()"">
            <i class=""checkmark icon""></i>
            确定
        </div>
    </div>
</div>

<script>
    function CheckNotEmpty() {
        var re = /\s/;
        var Childs = document.getElementById(""OrderList"").childNodes;
        for (var i = 0; i < Childs.length; i++) {
            var node = Childs[i];
            // nodetype 和 re的正则匹配
            if (node.nodeType == 3 && re.test(node.nodeValue)) {
                node.parentNode.removeChild(node);
            }
        }//去除空文本节点
        var displaynum = 0;
        for (var i = 1; i < Childs.length; ");
            WriteLiteral(@"i++) {
            var node = Childs[i];
            if (node.style.display == ""block"") {
                displaynum++;
            }
        }
        console.log(Childs.length);
        console.log(displaynum);
        if (displaynum == 0) {
            return 0;
        }
        else {
            return 1;
        }
    }
    function OrderEmpty() {
        if (CheckNotEmpty()) {
            document.getElementById(""Empty"").style.display = ""none"";
        }
        else {
            document.getElementById(""Empty"").style.display = ""block"";
        }
    }
    function DeleteOrder() {
        //console.log(deleteid);
        //var deleteorder = document.getElementById(deleteid);
        //deleteorder.parentNode.removeChild(deleteorder);
        //OrderEmpty();

        $.ajax({
            type: ""post"",
            url: ""/Order/changeOrderState"",
            data: {
                o_id: deleteOrder_id,
                state:");
            EndContext();
            BeginContext(7534, 47, false);
#line 182 "E:\2--practice\vs\c#\DBPro\DBPro\Views\Shoporder\Shoporder.cshtml"
                  Write((int)DBPro.Entity.Order.OrderStatus.unevaluated);

#line default
#line hidden
            EndContext();
            BeginContext(7582, 5783, true);
            WriteLiteral(@"
            },
            success: function (result) {
                alert(result);
                if (result == ""修改成功"") {
                    
                    standardPost(""/Shoporder/Shoporder"", currentShopid, ""s_id"");
                }
            }
        });
    }
    function ChangeOrderView(id) {
        var StateList = document.querySelectorAll("".detail"");
        var i = 0;
        if (id == ""WaitPay"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待付款"") {

                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""All"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
              ");
            WriteLiteral(@"  OrderX.style.display = ""block"";
            }
        }
        else if (id == ""WaitDeliver"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待发货"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""WaitReceive"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待收货"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""WaitComment"") {
            for (i = 0; i < StateList.length; i++) {
    ");
            WriteLiteral(@"            var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待评价"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""Finish"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""已完成"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""WaitRefund"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""待退款"") {
                    OrderX");
            WriteLiteral(@".style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        else if (id == ""Refunded"") {
            for (i = 0; i < StateList.length; i++) {
                var OrderX = StateList[i].parentNode.parentNode.parentNode.parentNode;
                if (StateList[i].innerText == ""已退款"") {
                    OrderX.style.display = ""block"";
                }
                else {
                    OrderX.style.display = ""none"";
                }
            }
        }
        OrderEmpty();
    }
    function Inti() {
        var OrderList = document.querySelectorAll("".ui.red.segment"");
        var Button1 = document.getElementsByName(""evaluate"");
        var Button2 = document.getElementsByName(""Delete"");
        for (var i = 0; i < Button1.length; i++) {
            var Order1 = Button1[i].parentNode.parentNode.parentNode.parentNode;
            var State = Order1.children[0].chi");
            WriteLiteral(@"ldren[0].children[0].children[1];
            //console.log(Order1);
            //console.log(State.innerText);


            //*7.12 8:00
            //
            //
            Button1[i].style.display = ""none"";
            //if (State.innerText == ""待评价"") {
            //    Button1[i].style.display = ""true"";
            //}
            //else {
            //    Button1[i].style.display = ""none"";
            //}
        }
        for (var i = 0; i < Button2.length; i++) {
            var Order1 = Button1[i].parentNode.parentNode.parentNode.parentNode;
            var State = Order1.children[0].children[0].children[0].children[1];
            //console.log(Order1);
            //console.log(State.innerText);
            if (State.innerText !=  ""待发货"") {
                Button2[i].style.display = ""none"";
            }
            else {
                Button2[i].style.display = ""true"";
            }
        }
    }
    OrderEmpty();
    Inti();
</script>
<script>
    funct");
            WriteLiteral(@"ion viewOrder() {

        // alert(event.currentTarget.id);
        var o_id = event.currentTarget.id;
        standardPost(""/Shoporder/Detail"", o_id, ""o_id"");
    }
</script>
<script>
    var deleteid;//当前被选中删除的订单的id
    var deleteOrder_id;
    var currentShopid;
    function DeleteEnsure(id) {

        currentShopid = document.getElementById(""ModelShopID"" + id).innerHTML;
        deleteOrder_id = document.getElementById(""ModelOrderID"" + id).innerHTML;
        //console.log(id);
        deleteid = ""Order"" + id;
        //console.log(deleteid);
        $('.ui.basic.modal')
            .modal('show')
            ;

    }
</script>
");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<OrderViewModel>> Html { get; private set; }
    }
}
#pragma warning restore 1591
